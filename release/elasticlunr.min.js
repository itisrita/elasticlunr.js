/**
 * elasticlunr - http://weixsong.github.io
 * Fork of Lightweight full-text search engine in Javascript for browser search and offline search. - 0.9.5
 *
 * Copyright (C) 2016 Oliver Nightingale
 * Copyright (C) 2016 Wei Song
 * Copyright (C) 2017 Margarita Kondrateva
 * MIT Licensed
 * @license
 */
 !function(){var a=function(b){var c=new a.Index;return c.pipeline.add(a.trimmer,a.stopWordFilter,a.stemmer),b&&b.call(c,c),c};a.version="0.9.5",lunr=a,a.utils={},a.utils.warn=function(a){return function(b){a.console&&console.warn&&console.warn(b)}}(this),a.utils.toString=function(a){return void 0===a||null===a?"":a.toString()},a.EventEmitter=function(){this.events={}},a.EventEmitter.prototype.addListener=function(){var a=Array.prototype.slice.call(arguments),b=a.pop(),c=a;if("function"!=typeof b)throw new TypeError("last argument must be a function");c.forEach(function(a){this.hasHandler(a)||(this.events[a]=[]),this.events[a].push(b)},this)},a.EventEmitter.prototype.removeListener=function(a,b){if(this.hasHandler(a)){var c=this.events[a].indexOf(b);c!==-1&&(this.events[a].splice(c,1),0==this.events[a].length&&delete this.events[a])}},a.EventEmitter.prototype.emit=function(a){if(this.hasHandler(a)){var b=Array.prototype.slice.call(arguments,1);this.events[a].forEach(function(a){a.apply(void 0,b)},this)}},a.EventEmitter.prototype.hasHandler=function(a){return a in this.events},a.tokenizer=function(b){if(!arguments.length||null===b||void 0===b)return[];if(Array.isArray(b)){var c=b.filter(function(a){return null!==a&&void 0!==a});c=c.map(function(b){return a.utils.toString(b).toLowerCase()});var d=[];return c.forEach(function(b){var c=b.split(a.tokenizer.seperator);d=d.concat(c)},this),d}return b.toString().trim().toLowerCase().split(a.tokenizer.seperator)},a.tokenizer.defaultSeperator=/[\s\-]+/,a.tokenizer.seperator=a.tokenizer.defaultSeperator,a.tokenizer.setSeperator=function(b){null!==b&&void 0!==b&&"object"==typeof b&&(a.tokenizer.seperator=b)},a.tokenizer.resetSeperator=function(){a.tokenizer.seperator=a.tokenizer.defaultSeperator},a.tokenizer.getSeperator=function(){return a.tokenizer.seperator},a.Pipeline=function(){this._queue=[]},a.Pipeline.registeredFunctions={},a.Pipeline.registerFunction=function(b,c){c in a.Pipeline.registeredFunctions&&a.utils.warn("Overwriting existing registered function: "+c),b.label=c,a.Pipeline.registeredFunctions[c]=b},a.Pipeline.getRegisteredFunction=function(b){return b in a.Pipeline.registeredFunctions!=!0?null:a.Pipeline.registeredFunctions[b]},a.Pipeline.warnIfFunctionNotRegistered=function(b){var c=b.label&&b.label in this.registeredFunctions;c||a.utils.warn("Function is not registered with pipeline. This may cause problems when serialising the index.\n",b)},a.Pipeline.load=function(b){var c=new a.Pipeline;return b.forEach(function(b){var d=a.Pipeline.getRegisteredFunction(b);if(!d)throw new Error("Cannot load un-registered function: "+b);c.add(d)}),c},a.Pipeline.prototype.add=function(){var b=Array.prototype.slice.call(arguments);b.forEach(function(b){a.Pipeline.warnIfFunctionNotRegistered(b),this._queue.push(b)},this)},a.Pipeline.prototype.after=function(b,c){a.Pipeline.warnIfFunctionNotRegistered(c);var d=this._queue.indexOf(b);if(d===-1)throw new Error("Cannot find existingFn");this._queue.splice(d+1,0,c)},a.Pipeline.prototype.before=function(b,c){a.Pipeline.warnIfFunctionNotRegistered(c);var d=this._queue.indexOf(b);if(d===-1)throw new Error("Cannot find existingFn");this._queue.splice(d,0,c)},a.Pipeline.prototype.remove=function(a){var b=this._queue.indexOf(a);b!==-1&&this._queue.splice(b,1)},a.Pipeline.prototype.run=function(a){for(var b=[],c=a.length,d=this._queue.length,e=0;e<c;e++){for(var f=a[e],g=0;g<d&&(f=this._queue[g](f,e,a),void 0!==f&&null!==f);g++);void 0!==f&&null!==f&&b.push(f)}return b},a.Pipeline.prototype.reset=function(){this._queue=[]},a.Pipeline.prototype.get=function(){return this._queue},a.Pipeline.prototype.toJSON=function(){return this._queue.map(function(b){return a.Pipeline.warnIfFunctionNotRegistered(b),b.label})},a.Index=function(){this._fields=[],this._ref="id",this.pipeline=new a.Pipeline,this.documentStoreLength=0,this.index={},this.eventEmitter=new a.EventEmitter,this._idfCache={},this.on("add","remove","update",function(){this._idfCache={}}.bind(this))},a.Index.prototype.on=function(){var a=Array.prototype.slice.call(arguments);return this.eventEmitter.addListener.apply(this.eventEmitter,a)},a.Index.prototype.off=function(a,b){return this.eventEmitter.removeListener(a,b)},a.Index.load=function(b){b.version!==a.version&&a.utils.warn("version mismatch: current "+a.version+" importing "+b.version);var c=new this;c._fields=b.fields,c._ref=b.ref,c.pipeline=a.Pipeline.load(b.pipeline),c.index={};for(var d in b.index)c.index[d]=a.InvertedIndex.load(b.index[d]);return c},a.Index.prototype.addField=function(b){return this._fields.push(b),this.index[b]=new a.InvertedIndex,this},a.Index.prototype.setRef=function(a){return this._ref=a,this},a.Index.prototype.addDoc=function(b,c){if(b){var c=void 0===c||c,d=b[this._ref];this.documentStoreLength=this.documentStoreLength+1,this._fields.forEach(function(c){var e=this.pipeline.run(a.tokenizer(b[c])),f={};e.forEach(function(a){a in f?f[a]+=1:f[a]=1},this);for(var g in f){var h=f[g];h=Math.sqrt(h),this.index[c].addToken(g,{ref:d,tf:h})}},this),c&&this.eventEmitter.emit("add",b,this)}},a.Index.prototype.idf=function(a,b){var c="@"+b+"/"+a;if(Object.prototype.hasOwnProperty.call(this._idfCache,c))return this._idfCache[c];var d=this.index[b].getDocFreq(a),e=1+Math.log(this.documentStoreLength/(d+1));return this._idfCache[c]=e,e},a.Index.prototype.getFields=function(){return this._fields.slice()},a.Index.prototype.search=function(b,c){if(!b)return[];var d=null;null!=c&&(d=JSON.stringify(c));var e=new a.Configuration(d,this.getFields()).get(),f=this.pipeline.run(a.tokenizer(b)),g={};for(var h in e){var i=this.fieldSearch(f,h,e),j=e[h].boost;for(var k in i)i[k]=i[k]*j;for(var k in i)k in g?g[k]+=i[k]:g[k]=i[k]}var m,l=[];for(var k in g)m={ref:k,score:g[k]},l.push(m);return l.sort(function(a,b){return b.score-a.score}),l},a.Index.prototype.fieldSearch=function(a,b,c){var d=c[b].bool,e=c[b].expand,f=c[b].boost,g=null,h={};if(0!==f)return a.forEach(function(a){var c=[a];1==e&&(c=this.index[b].expandToken(a));var f={};c.forEach(function(c){var e=this.index[b].getDocs(c),i=this.idf(c,b);if(g&&"AND"==d){var j={};for(var k in g)k in e&&(j[k]=e[k]);e=j}c==a&&this.fieldSearchStats(h,c,e);for(var k in e){var l=this.index[b].getTermFrequency(c,k),m=1,n=1;0!=m&&(n=1/Math.sqrt(m));var o=1;c!=a&&(o=.15*(1-(c.length-a.length)/c.length));var p=l*i*n*o;k in f?f[k]+=p:f[k]=p}},this),g=this.mergeScores(g,f,d)},this),g=this.coordNorm(g,h,a.length)},a.Index.prototype.mergeScores=function(a,b,c){if(!a)return b;if("AND"==c){var d={};for(var e in b)e in a&&(d[e]=a[e]+b[e]);return d}for(var e in b)e in a?a[e]+=b[e]:a[e]=b[e];return a},a.Index.prototype.fieldSearchStats=function(a,b,c){for(var d in c)d in a?a[d].push(b):a[d]=[b]},a.Index.prototype.coordNorm=function(a,b,c){for(var d in a)if(d in b){var e=b[d].length;a[d]=a[d]*e/c}return a},a.Index.prototype.toJSON=function(){var b={};return this._fields.forEach(function(a){b[a]=this.index[a].toJSON()},this),{version:a.version,fields:this._fields,ref:this._ref,index:b,pipeline:this.pipeline.toJSON()}},a.Index.prototype.use=function(a){var b=Array.prototype.slice.call(arguments,1);b.unshift(this),a.apply(this,b)},a.stemmer=function(){var a={ational:"ate",tional:"tion",enci:"ence",anci:"ance",izer:"ize",bli:"ble",alli:"al",entli:"ent",eli:"e",ousli:"ous",ization:"ize",ation:"ate",ator:"ate",alism:"al",iveness:"ive",fulness:"ful",ousness:"ous",aliti:"al",iviti:"ive",biliti:"ble",logi:"log"},b={icate:"ic",ative:"",alize:"al",iciti:"ic",ical:"ic",ful:"",ness:""},c="[^aeiou]",d="[aeiouy]",e=c+"[^aeiouy]*",f=d+"[aeiou]*",g="^("+e+")?"+f+e,h="^("+e+")?"+f+e+"("+f+")?$",i="^("+e+")?"+f+e+f+e,j="^("+e+")?"+d,k=new RegExp(g),l=new RegExp(i),m=new RegExp(h),n=new RegExp(j),o=/^(.+?)(ss|i)es$/,p=/^(.+?)([^s])s$/,q=/^(.+?)eed$/,r=/^(.+?)(ed|ing)$/,s=/.$/,t=/(at|bl|iz)$/,u=new RegExp("([^aeiouylsz])\\1$"),v=new RegExp("^"+e+d+"[^aeiouwxy]$"),w=/^(.+?[^aeiou])y$/,x=/^(.+?)(ational|tional|enci|anci|izer|bli|alli|entli|eli|ousli|ization|ation|ator|alism|iveness|fulness|ousness|aliti|iviti|biliti|logi)$/,y=/^(.+?)(icate|ative|alize|iciti|ical|ful|ness)$/,z=/^(.+?)(al|ance|ence|er|ic|able|ible|ant|ement|ment|ent|ou|ism|ate|iti|ous|ive|ize)$/,A=/^(.+?)(s|t)(ion)$/,B=/^(.+?)e$/,C=/ll$/,D=new RegExp("^"+e+d+"[^aeiouwxy]$"),E=function(d){var e,f,g,h,i,j,E;if(d.length<3)return d;if(g=d.substr(0,1),"y"==g&&(d=g.toUpperCase()+d.substr(1)),h=o,i=p,h.test(d)?d=d.replace(h,"$1$2"):i.test(d)&&(d=d.replace(i,"$1$2")),h=q,i=r,h.test(d)){var F=h.exec(d);h=k,h.test(F[1])&&(h=s,d=d.replace(h,""))}else if(i.test(d)){var F=i.exec(d);e=F[1],i=n,i.test(e)&&(d=e,i=t,j=u,E=v,i.test(d)?d+="e":j.test(d)?(h=s,d=d.replace(h,"")):E.test(d)&&(d+="e"))}if(h=w,h.test(d)){var F=h.exec(d);e=F[1],d=e+"i"}if(h=x,h.test(d)){var F=h.exec(d);e=F[1],f=F[2],h=k,h.test(e)&&(d=e+a[f])}if(h=y,h.test(d)){var F=h.exec(d);e=F[1],f=F[2],h=k,h.test(e)&&(d=e+b[f])}if(h=z,i=A,h.test(d)){var F=h.exec(d);e=F[1],h=l,h.test(e)&&(d=e)}else if(i.test(d)){var F=i.exec(d);e=F[1]+F[2],i=l,i.test(e)&&(d=e)}if(h=B,h.test(d)){var F=h.exec(d);e=F[1],h=l,i=m,j=D,(h.test(e)||i.test(e)&&!j.test(e))&&(d=e)}return h=C,i=l,h.test(d)&&i.test(d)&&(h=s,d=d.replace(h,"")),"y"==g&&(d=g.toLowerCase()+d.substr(1)),d};return E}(),a.Pipeline.registerFunction(a.stemmer,"stemmer"),a.stopWordFilter=function(b){if(b&&a.stopWordFilter.stopWords[b]!==!0)return b},a.clearStopWords=function(){a.stopWordFilter.stopWords={}},a.addStopWords=function(b){null!=b&&Array.isArray(b)!==!1&&b.forEach(function(b){a.stopWordFilter.stopWords[b]=!0},this)},a.resetStopWords=function(){a.stopWordFilter.stopWords=a.defaultStopWords},a.defaultStopWords={"":!0,a:!0,able:!0,about:!0,across:!0,after:!0,all:!0,almost:!0,also:!0,am:!0,among:!0,an:!0,and:!0,any:!0,are:!0,as:!0,at:!0,be:!0,because:!0,been:!0,but:!0,by:!0,can:!0,cannot:!0,could:!0,dear:!0,did:!0,do:!0,does:!0,either:!0,else:!0,ever:!0,every:!0,for:!0,from:!0,get:!0,got:!0,had:!0,has:!0,have:!0,he:!0,her:!0,hers:!0,him:!0,his:!0,how:!0,however:!0,i:!0,if:!0,in:!0,into:!0,is:!0,it:!0,its:!0,just:!0,least:!0,let:!0,like:!0,likely:!0,may:!0,me:!0,might:!0,most:!0,must:!0,my:!0,neither:!0,no:!0,nor:!0,not:!0,of:!0,off:!0,often:!0,on:!0,only:!0,or:!0,other:!0,our:!0,own:!0,rather:!0,said:!0,say:!0,says:!0,she:!0,should:!0,since:!0,so:!0,some:!0,than:!0,that:!0,the:!0,their:!0,them:!0,then:!0,there:!0,these:!0,they:!0,this:!0,tis:!0,to:!0,too:!0,twas:!0,us:!0,wants:!0,was:!0,we:!0,were:!0,what:!0,when:!0,where:!0,which:!0,while:!0,who:!0,whom:!0,why:!0,will:!0,with:!0,would:!0,yet:!0,you:!0,your:!0},a.stopWordFilter.stopWords=a.defaultStopWords,a.Pipeline.registerFunction(a.stopWordFilter,"stopWordFilter"),a.trimmer=function(a){if(null===a||void 0===a)throw new Error("token should not be undefined");return a.replace(/^\W+/,"").replace(/\W+$/,"")},a.Pipeline.registerFunction(a.trimmer,"trimmer"),a.InvertedIndex=function(){this.root={docs:{},df:0}},a.InvertedIndex.load=function(a){var b=new this;return b.root=a.root,b},a.InvertedIndex.prototype.addToken=function(a,b,c){for(var c=c||this.root,d=0;d<=a.length-1;){var e=a[d];e in c||(c[e]={docs:{},df:0}),d+=1,c=c[e]}var f=b.ref;c.docs[f]?c.docs[f]={tf:b.tf}:(c.docs[f]={tf:b.tf},c.df+=1)},a.InvertedIndex.prototype.hasToken=function(a){if(!a)return!1;for(var b=this.root,c=0;c<a.length;c++){if(!b[a[c]])return!1;b=b[a[c]]}return!0},a.InvertedIndex.prototype.getNode=function(a){if(!a)return null;for(var b=this.root,c=0;c<a.length;c++){if(!b[a[c]])return null;b=b[a[c]]}return b},a.InvertedIndex.prototype.getDocs=function(a){var b=this.getNode(a);return null==b?{}:b.docs},a.InvertedIndex.prototype.getTermFrequency=function(a,b){var c=this.getNode(a);return null==c?0:b in c.docs?c.docs[b].tf:0},a.InvertedIndex.prototype.getDocFreq=function(a){var b=this.getNode(a);return null==b?0:b.df},a.InvertedIndex.prototype.removeToken=function(a,b){if(a){var c=this.getNode(a);null!=c&&b in c.docs&&(delete c.docs[b],c.df-=1)}},a.InvertedIndex.prototype.expandToken=function(a,b,c){if(null==a||""==a)return[];var b=b||[];if(void 0==c&&(c=this.getNode(a),null==c))return b;c.df>0&&b.push(a);for(var d in c)"docs"!==d&&"df"!==d&&this.expandToken(a+d,b,c[d]);return b},a.InvertedIndex.prototype.toJSON=function(){return{root:this.root}},a.Configuration=function(b,c){var b=b||"";if(void 0==c||null==c)throw new Error("fields should not be null");this.config={};var d;try{d=JSON.parse(b),this.buildUserConfig(d,c)}catch(b){a.utils.warn("user configuration parse failed, will use default configuration"),this.buildDefaultConfig(c)}},a.Configuration.prototype.buildDefaultConfig=function(a){this.reset(),a.forEach(function(a){this.config[a]={boost:1,bool:"OR",expand:!1}},this)},a.Configuration.prototype.buildUserConfig=function(b,c){var d="OR",e=!1;if(this.reset(),"bool"in b&&(d=b.bool||d),"expand"in b&&(e=b.expand||e),"fields"in b)for(var f in b.fields)if(c.indexOf(f)>-1){var g=b.fields[f],h=e;void 0!=g.expand&&(h=g.expand),this.config[f]={boost:g.boost||0===g.boost?g.boost:1,bool:g.bool||d,expand:h}}else a.utils.warn("field name in user configuration not found in index instance fields");else this.addAllFields2UserConfig(d,e,c)},a.Configuration.prototype.addAllFields2UserConfig=function(a,b,c){c.forEach(function(c){this.config[c]={boost:1,bool:a,expand:b}},this)},a.Configuration.prototype.get=function(){return this.config},a.Configuration.prototype.reset=function(){this.config={}},lunr.SortedSet=function(){this.length=0,this.elements=[]},lunr.SortedSet.load=function(a){var b=new this;return b.elements=a,b.length=a.length,b},lunr.SortedSet.prototype.add=function(){var a,b;for(a=0;a<arguments.length;a++)b=arguments[a],~this.indexOf(b)||this.elements.splice(this.locationFor(b),0,b);this.length=this.elements.length},lunr.SortedSet.prototype.toArray=function(){return this.elements.slice()},lunr.SortedSet.prototype.map=function(a,b){return this.elements.map(a,b)},lunr.SortedSet.prototype.forEach=function(a,b){return this.elements.forEach(a,b)},lunr.SortedSet.prototype.indexOf=function(a){for(var b=0,c=this.elements.length,d=c-b,e=b+Math.floor(d/2),f=this.elements[e];d>1;){if(f===a)return e;f<a&&(b=e),f>a&&(c=e),d=c-b,e=b+Math.floor(d/2),f=this.elements[e]}return f===a?e:-1},lunr.SortedSet.prototype.locationFor=function(a){for(var b=0,c=this.elements.length,d=c-b,e=b+Math.floor(d/2),f=this.elements[e];d>1;)f<a&&(b=e),f>a&&(c=e),d=c-b,e=b+Math.floor(d/2),f=this.elements[e];return f>a?e:f<a?e+1:void 0},lunr.SortedSet.prototype.intersect=function(a){for(var b=new lunr.SortedSet,c=0,d=0,e=this.length,f=a.length,g=this.elements,h=a.elements;;){if(c>e-1||d>f-1)break;g[c]!==h[d]?g[c]<h[d]?c++:g[c]>h[d]&&d++:(b.add(g[c]),c++,d++)}return b},lunr.SortedSet.prototype.clone=function(){var a=new lunr.SortedSet;return a.elements=this.toArray(),a.length=a.elements.length,a},lunr.SortedSet.prototype.union=function(a){var b,c,d;this.length>=a.length?(b=this,c=a):(b=a,c=this),d=b.clone();for(var e=0,f=c.toArray();e<f.length;e++)d.add(f[e]);return d},lunr.SortedSet.prototype.toJSON=function(){return this.toArray()},function(a,b){"function"==typeof define&&define.amd?define(b):"object"==typeof exports?module.exports=b():a.elasticlunr=b()}(this,function(){return a})}();
